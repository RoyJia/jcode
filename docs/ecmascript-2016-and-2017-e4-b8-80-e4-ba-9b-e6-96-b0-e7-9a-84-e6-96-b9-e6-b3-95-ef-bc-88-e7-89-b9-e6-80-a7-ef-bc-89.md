---
title: ECMAScript 2016 and 2017 ä¸€äº›æ–°çš„æ–¹æ³•ï¼ˆç‰¹æ€§ï¼‰
tag: JavaScript
date: 2018-04-09
---

![ECMAScript 2016](https://github.com/RoyJia/mdimgs/raw/master/res/ECMAScript-2016.png)

Array.prototype.includes()
---

`includes` æ˜¯æ•°ç»„Arrayçš„ä¸€ä¸ªç®€å•çš„å®ä¾‹æ–¹æ³•ï¼Œå¯ä»¥è½»æ¾æŸ¥æ‰¾æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé¡¹ç›®ï¼ˆç”šè‡³å¯ä»¥æŸ¥æ‰¾`NaN`è¿™æ ·çš„å…ƒç´ ï¼Œä¸åƒ`indexOf`ï¼‰ã€‚

```js
    const arr = [1, 2, 3, 4, NaN];

    if(arr.indexof(3) >= 0) {
        console.log(true);
    }

    if(arr.includes(3)) {
        console.log(true);
    }

    // PS: indexOf doesn't work for searching NaN
    arr.includes(NaN); // true
    arr.indexOf(NaN); // -1 (doesn't work for NaN)
```

<!-- More -->

Exponentiation infix operator - æŒ‡æ•°è¿ç®—ç¬¦
---

ES2016ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ `**` ä»£æ›¿ `Math.pow`ï¼Œå®ç°æŒ‡æ•°è¿ç®—ã€‚

```js
    Math.pow(2, 3); // 8

    2**3; // 8
```

![ECMAScript 2017](https://github.com/RoyJia/mdimgs/raw/master/res/ECMAScript-2017.png)

Object.values()
---

`Object.values()` æ˜¯ä¸€ä¸ªç±»ä¼¼äº `Object.keys()` çš„æ–°æ–¹æ³•ï¼Œè¿”å›å¯¹è±¡è‡ªèº«å±æ€§çš„æ‰€æœ‰å€¼ï¼Œä½†ä¸åŒ…æ‹¬åŸå‹é“¾ï¼ˆprototypical chainï¼‰ä¸­çš„ä»»ä½•å€¼ã€‚

```js
    const cars = { BMW: 3, Tesla: 2, Toyota: 1};

    // ES2015
    const vals = Object.keys(cars).map(key => cars[key])ï¼›
    console.log(vals); // [ 3, 2, 1 ]

    // ES2017 and onwards
    const values = Object.values(cars);
    console.log(values); // [3, 2, 1]
```

Object.entries()
---

`Object.entries()` ä¸ `Object.keys` ç›¸å…³ï¼Œä½†ä¸åªæ˜¯è¿”å›keyï¼Œè€Œæ˜¯ä»¥æ•°ç»„çš„æ–¹å¼è¿”å›keyå’Œvalueï¼Œå¦‚æ­¤ï¼Œå°†ä»¥ç®€å•çš„æ–¹å¼å®ç°åœ¨loopä¸­ä½¿ç”¨å¯¹è±¡æˆ–å°†å¯¹è±¡è½¬æ¢ä¸ºMapã€‚

> Example 1

```js
    const cars = { BMW: 3, Tesla: 2, Toyota: 1};

    // ES 5.1
    // Instead of extracting keys and then again looping
    Object.keys(cars).forEach(function(key) {
        console.log('key' + key + ' value' + cars[key]);
    })

    // ES 8
    for(let [key, value] of Object.entries(cars)) {
        console.log(`key: ${key} value ${value}`);
    }
```

> Example 2

```js
    const cars = { BMW: 3, Tesla: 2, Toyota: 1};

    // ES 6
    // Get Object keys and then add each item to Map in a loop
    const map1 = new Map();
    Object.keys(cars).forEach(function(key) {
        map1.set(key, cars[key]);
    });
    console.log(map1); // Map { 'BMW' => 3, 'Tesla' => 2, 'Toyota' => 1 }

    // ES 8
    const map = new Map(Objects.entries(cars));
    console.log(map); // Map { 'BMW' => 3, 'Tesla' => 2, 'Toyota' => 1 }
```

String padding
---

Stringå¯¹è±¡å¢åŠ äº†ä¸¤ä¸ªå®ä¾‹æ–¹æ³•ï¼Œ`String.prototype.padStart` å’Œ `String.prototype.padEnd`ï¼Œç›®çš„åœ¨äºåœ¨åŸå§‹å­—ç¬¦ä¸²çš„å¼€å§‹æˆ–ç»“å°¾é¢„å…ˆæ·»åŠ æˆ–é™„åŠ ç©ºå­—ç¬¦ä¸²æˆ–è€…å…¶ä»–å­—ç¬¦ä¸²ã€‚

```js
    'someString'.padStart(numberOfCharcters [,stringForPadding]); 

    '5'.padStart(10) // '          5'
    '5'.padStart(10, '=*') //'=*=*=*=*=5'

    '5'.padEnd(10) // '5         '
    '5'.padEnd(10, '=*') //'5=*=*=*=*='
```

> ä¸€ä¸ªå¯ç”¨åœºæ™¯å°±æ˜¯åœ¨æ‰“å°æˆ–è€…ç»ˆç«¯æ˜¾ç¤ºå†…å®¹æ—¶ï¼Œå¯¹é½å†…å®¹

Object.getOwnPropertyDescriptors
---

è¯¥æ–¹æ³•è¿”å›ç»™å®šå¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„è¯¦æƒ…ï¼ŒåŒ…æ‹¬ getter `get` å’Œ setter `set` æ–¹æ³•ã€‚èµ·ä¸»è¦çš„ç›®çš„æ˜¯å…è®¸å°†ä¸€ä¸ªå¯¹è±¡æµ…æ‹·è´/å…‹éš†åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼ŒåŒæ—¶ä¼šå¤åˆ¶getterå’Œsetteræ–¹æ³•ã€‚

> `Object.assign` ä¼šæµ…å¤åˆ¶åŸå§‹å¯¹è±¡é™¤getterå’Œsetteræ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ã€‚

```js
    // BEFORE
    var Car = {
        name: 'BMW',
        price: 1000000,
        set discount(x) {
            this.d = x;
        },
        get discount() {
            return this.d
        }
    };

    // Print details of Car object's 'discount' property
    console.log(Object.getOwnPropertyDescriptor(car, 'discount'));
    // print..
    // {
    //         get: [Function: get],
    //        set: [Function: set],
    //         enumerable: true,
    //         configurable: true
    // }

    // copy Car's properties to ElectricCar using Object.assign
    const ElectricCar = Object.assign({}, Car);

    // Print details of ElectricCar object's 'discount' property
    console.log(Object.getOwnPropertyDescriptor(ElectricCar, 'discount'));
    // print..
    // {
    //         value: undefined,
    //        writable: true,
    //         enumerable: true,
    //         configurable: true
    // }
    // âš ï¸Notice that getters and stters are missing in ElectricCar object for 'discount' property !ğŸ‘ğŸ½ğŸ‘ğŸ½

    // AFTER
    var Car = {
        name: 'BMW',
        price: 1000000,
        set discount(x) {
            this.d = x;
        },
        get discount() {
            return this.d
        }
    };

    // ä½¿ç”¨ Object.defineProperties å¤åˆ¶ Car åˆ°ElectricCar2
    // å¹¶ä½¿ç”¨ Object.getOwnPropertyDescriptor æå– Car çš„å±æ€§
    const ElectricCar2 = Object.defineProperties({}, Object.getOwnPropertyDescriptors(Car));

    //Print details of ElectricCar2 object's 'discount' property
    console.log(Object.getOwnPropertyDescriptor(ElectricCar2, 'discount'));
    //prints..
    // { get: [Function: get],  ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼
    //   set: [Function: set],  ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼
    //   enumerable: true,
    //   configurable: true 
    // }
    // Notice that getters and setters are present in the ElectricCar2 object for 'discount' property!
```

å‡½æ•°å‚æ•°å…è®¸ä½¿ç”¨ trailing comma
---

```js
    function Person(
        name,
        age, // ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼
    ) {
        this.name = name;
        this.age = age;
    }
```

> åŒæ ·ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä¹Ÿå…è®¸ä½¿ç”¨ trailing comma
